{"version":3,"file":"23.main.js","sources":["webpack:///./src/components/views/projects/ProposalSubmit.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n  CRow,\r\n  CCol,\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardFooter,\r\n  CListGroup,\r\n  CListGroupItem,\r\n  CCardHeader\r\n} from \"@coreui/react\";\r\nimport { getProfileFetch } from '../../../actions'\r\nimport { ProjectWorkflowService, FoxApiService } from '../../../services'\r\n\r\nconst workflow = new ProjectWorkflowService();\r\nconst foxApi = new FoxApiService();\r\n\r\nclass ProposalSubmit extends Component {\r\n\r\n  state = {\r\n    status: \"Created\",\r\n    error: \"\"\r\n  }\r\n\r\n  handleSubmit = async () => {\r\n    console.log(this.props);\r\n    await workflow.submitProposal(this.props.match.params.id)\r\n      .then(\r\n        this.props.history.goBack()\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n        this.setState({\r\n          error: 'Proposal submit failed!' +\r\n            ' Please check your input and try again!' +\r\n            ' In case this problem repeats, please contact your administrator!'\r\n        })\r\n      })\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    await this.props.getProfileFetch()\r\n      .then(() => { return foxApi.getDetailsOf('projects', this.props.match.params.id) })\r\n      .then(data => {\r\n        this.setState({\r\n          status: data.status\r\n        })\r\n      })\r\n  }\r\n\r\n  render = () => {\r\n    return (\r\n      // this.state.status === \"Created\" || this.state.status === \"Rejected\"\r\n      ['Created', 'Rejected'].includes(this.state.status)\r\n        ?\r\n        <CRow>\r\n          <CCol>\r\n            <CCard>\r\n              <CCardHeader>\r\n                <strong>Rules and Regulations to Comply</strong>\r\n              </CCardHeader>\r\n              <CCardBody>\r\n                <CListGroup>\r\n                  <CListGroupItem>\r\n                    The person in charge/contractor’s supervisor will be wholly responsible and accountable for\r\n                    the behavior and safety of his worker and implement all safety measures.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    By acknowledging this he/she shall be responsible for any incident or accident\r\n                    and hereby agreed upon all of the above terms and conditions. The University\r\n                    shall have the authority to stop work immediately if the regulations are not met.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Please attach this permit with a list of workers’ name & identification number\r\n                    (IC/work permit/passport) as well as risk assessment, method statement,\r\n                    HIRAC or any other relevant document as requested by the university.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Contractor shall not plug in any gadget or laptop to the university’s\r\n                    network or power point unless permitted.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Contractor's PIC must give instructions to workers and be present\r\n                    at site at all time to supervise the work.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Contractor must wear employee pass and suitable PPE at all time whenever they are at site.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Work on weekend or public holidays will need approval from the authorizing person\r\n                    from the Client’s department.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    30km/h speed limits for vehicle should apply and priority to pedestrian.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Contractor is forbidden to enter areas in which not stated in the permit.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Any usage of fire extinguishing equipment must be report to the university immediately.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Any damages done to the university’s property shall be reported immediately and if in\r\n                    any case damages not reported, additional penalty will be imposed to the contractor on top of the rectification cost.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Contractor should not store any equipment, machinery or tools within the university’s premises.\r\n                    If there is a need, contractor must clarify and liaise with Head of Engineering Services for temporary storage.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Smoking is prohibited unless at the designated area.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    The workplace must be kept clean and tidy after the work completed or stopped and needs to resume the next day\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Malaysia’s OSHA 1994 of safety regulation for hot work, working at height,\r\n                    excavation and lock-out, LOTO and confined spaces shall apply.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    Work must be stopped at 5.30 pm unless permitted by the university. Doors must be locked and lights turned off.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    All vehicle should park at the designated parking area.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    The validity of each permit is 7 days from the date of issuance.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    The university will not be liable for any accident occurred at site after issuing this permit.\r\n                  </CListGroupItem>\r\n                  <CListGroupItem>\r\n                    The permit to work should be submitted 3 working days prior commencement of work.\r\n                  </CListGroupItem>\r\n                </CListGroup>\r\n              </CCardBody>\r\n            </CCard>\r\n            <CCard>\r\n              <CCardBody>\r\n                I certify that I understand and will comply with all the requirement of this\r\n                application to work and strictly comply with the company’s rules and regulation\r\n              as well as Malaysia’s OSHA Act 1994. Intolerable risk subjected to <strong>any violation\r\n              of this application’s requirement may cause work process being stopped</strong>.\r\n            </CCardBody>\r\n              <CCardFooter>\r\n                <CButton\r\n                  type=\"submit\"\r\n                  color=\"dark\"\r\n                  variant=\"outline\"\r\n                  block\r\n                  onClick={this.handleSubmit}\r\n                >Submit Proposal</CButton>\r\n                {this.state.error\r\n                  ? <p>{this.state.error}</p>\r\n                  : null\r\n                }\r\n              </CCardFooter>\r\n            </CCard>\r\n          </CCol>\r\n        </CRow >\r\n        : <Redirect to={`/projects/${this.props.match.params.id}/application_status`} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  getProfileFetch: () => dispatch(getProfileFetch()),\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(ProposalSubmit)\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAWA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAFA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAOA;AACA;AAAA;AACA;AADA;AAKA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AACA;AADA;AAGA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AAEA;AA6FA;AACA;AACA;AACA;AACA;AALA;AAeA;AAAA;AA7GA;AA+GA;AACA;;;;;AAlJA;AACA;AAmJA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AACA;AAGA;;;;A","sourceRoot":""}