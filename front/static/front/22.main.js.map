{"version":3,"file":"22.main.js","sources":["webpack:///./src/components/views/projects/ProposalSubmit.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n  CRow,\r\n  CCol,\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardFooter\r\n} from \"@coreui/react\";\r\nimport { getProfileFetch } from '../../../actions'\r\nimport { ProjectWorkflowService, FoxApiService } from '../../../services'\r\n\r\nconst workflow = new ProjectWorkflowService();\r\nconst foxApi = new FoxApiService();\r\n\r\nclass ProposalSubmit extends Component {\r\n\r\n  state = {\r\n    status: \"Created\",\r\n    error: \"\"\r\n  }\r\n\r\n  handleSubmit = async () => {\r\n    console.log(this.props);\r\n    await workflow.submitProposal(this.props.match.params.id)\r\n      .then(\r\n        this.props.history.goBack()\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n        this.setState({\r\n          error: 'Proposal submit failed!' +\r\n            ' Please check your input and try again!' +\r\n            ' In case this problem repeats, please contact your administrator!'\r\n        })\r\n      })\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    await this.props.getProfileFetch()\r\n      .then(() => { return foxApi.getDetailsOf('projects', this.props.match.params.id) })\r\n      .then(data => {\r\n        console.log(data);\r\n        this.setState({\r\n          status: data.status\r\n        })\r\n      })\r\n  }\r\n\r\n  render = () => {\r\n    console.log(this.state.status);\r\n    return (\r\n      this.state.status === \"Created\"\r\n        ?\r\n        <CRow>\r\n          <CCol>\r\n            <CCard>\r\n              <CCardBody>\r\n                I certify that I understand and will comply with all the requirement of this\r\n                application to work and strictly comply with the company’s rules and regulation\r\n              as well as Malaysia’s OSHA Act 1994. Intolerable risk subjected to <strong>any violation\r\n              of this application’s requirement may cause work process being stopped</strong>.\r\n            </CCardBody>\r\n              <CCardFooter>\r\n                <CButton\r\n                  type=\"submit\"\r\n                  color=\"dark\"\r\n                  variant=\"outline\"\r\n                  block\r\n                  onClick={this.handleSubmit}\r\n                >Submit Proposal</CButton>\r\n                {this.state.error\r\n                  ? <p>{this.state.error}</p>\r\n                  : null\r\n                }\r\n              </CCardFooter>\r\n            </CCard>\r\n          </CCol>\r\n        </CRow >\r\n        : <Redirect to={`/projects/${this.props.match.params.id}/application_status`} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  getProfileFetch: () => dispatch(getProfileFetch()),\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(ProposalSubmit)\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAQA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAFA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAOA;AACA;AAAA;AACA;AADA;AAKA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AACA;AAAA;AACA;AADA;AAGA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AAcA;AACA;AACA;AACA;AACA;AALA;AAeA;AAAA;AAEA;AACA;;;;;AAnEA;AACA;AAoEA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AACA;AAGA;;;;A","sourceRoot":""}