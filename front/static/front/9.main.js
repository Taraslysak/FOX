(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{647:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return O})),n.d(t,"e",(function(){return ye})),n.d(t,"c",(function(){return de})),n.d(t,"d",(function(){return Ee}));var r=n(1),o=n.n(r),a=n(165),c=function(e){return o.a.createElement(a.H,e,e.linktext)},i=n(737),u=n.n(i),l=n(26);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=new l.a,E=o.a.createElement("div",{className:"pt-3 text-center"},o.a.createElement(a.kb,{size:"sm",variant:"grow",style:{width:"4rem",height:"4rem"}})),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,e);var t=d(n);function n(){var e;m(this,n);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return v(h(e=t.call.apply(t,[this].concat(i))),"state",{parts:[],doc_type:"",loaded:!1,display_show:!0}),v(h(e),"handleShow",(function(){e.setState({display_show:!e.state.display_show})})),v(h(e),"getDisplayUrl",(function(){var t=e.state.parts;return"".concat(g.apiBase,"documents/display/").concat(t[0],"/").concat(t[1],"/").concat(t[2],"/")})),v(h(e),"componentDidMount",(function(){g.getDisplayPermission(e.props.document.id).then((function(t){e.setState(p(p({},t),{},{loaded:!0}))})).catch((function(e){console.log(e)}))})),v(h(e),"render",(function(){return e.state.loaded?o.a.createElement(r.Fragment,null,o.a.createElement(a.e,{block:!0,color:"link",className:"text-left m-0 p-0 mb-1",onClick:e.handleShow},e.state.display_show?"Hide preview":"Show preview"),o.a.createElement(a.r,{show:e.state.display_show},o.a.createElement(u.a,{fileType:e.state.doc_type,filePath:e.getDisplayUrl()}))):E})),e}return n}(r.Component),_=n(95),j=n(166);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){k(a,r,o,c,i,"next",e)}function i(e){k(a,r,o,c,i,"throw",e)}c(void 0)}))}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=new l.a,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(n,e);var t=C(n);function n(){var e;N(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return I(T(e=t.call.apply(t,[this].concat(c))),"state",{name:"",file:"",issued_by:""}),I(T(e),"downloadFile",D(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U.downloadWorkerCompetency(e.props.competencyId).then((function(t){var n=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=n;var o=e.state.file.split("/").pop();r.setAttribute("download",o),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)})).catch((function(e){console.error("File download failed!"),console.error(e)}));case 1:case"end":return t.stop()}}),t)})))),I(T(e),"componentDidMount",D(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getProfileFetch().then((function(){return U.getDetailsOf("worker_special_competencies",e.props.competencyId)})).then((function(t){return e.setState(x({},t))})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})))),I(T(e),"render",(function(){return o.a.createElement(a.S,{flush:!0},o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Competency scan: ")),o.a.createElement(a.e,{variant:"outline",color:"success",id:"file",onClick:e.downloadFile},"Download")),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Issued_by: "),e.state.issued_by)))})),e}return n}(r.Component),L=Object(_.b)(null,(function(e){return{getProfileFetch:function(){return e(Object(j.h)())}}}))(A);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){W(a,r,o,c,i,"next",e)}function i(e){W(a,r,o,c,i,"throw",e)}c(void 0)}))}}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=new l.a,K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(n,e);var t=G(n);function n(){var e;q(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return X(Q(e=t.call.apply(t,[this].concat(c))),"state",{current_competency_id:"",current_competency_info:"",competencies:[]}),X(Q(e),"handleCompetencySelect",(function(t){e.state.current_competency_id===t.target.name?e.setState({current_competency_id:""}):e.setState({current_competency_id:t.target.name})})),X(Q(e),"componentDidMount",H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getProfileFetch().then((function(){return $.getEntityList("worker_special_competencies",{worker_id:e.props.workerId})})).then((function(t){e.setState({competencies:t})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})))),X(Q(e),"render",(function(){return e.state.competencies.length>0?e.state.competencies.map((function(t,n){return o.a.createElement(a.f,{key:"card-".concat(n),className:"mb-0"},o.a.createElement(a.i,{key:"ch-".concat(n),id:t.id},o.a.createElement("h6",{key:"h6-".concat(n),className:"m-0 p-0"},t.name),o.a.createElement(a.e,{key:"btn-".concat(n),block:!0,color:"link",className:"text-left m-0 p-0",id:t.id,value:t.id,name:t.id,onClick:e.handleCompetencySelect},"Display Details")),o.a.createElement(a.r,{key:"clps-".concat(n),show:e.state.current_competency_id===t.id.toString()},o.a.createElement(a.g,{key:"cbody-".concat(n)},o.a.createElement(L,{competencyId:t.id}))))})):o.a.createElement("p",null,"The contractor hasn't attached any competencies yet.")})),e}return n}(r.Component),Y=Object(_.b)(null,(function(e){return{getProfileFetch:function(){return e(Object(j.h)())}}}))(K);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){ne(a,r,o,c,i,"next",e)}function i(e){ne(a,r,o,c,i,"throw",e)}c(void 0)}))}}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=new l.a,pe=o.a.createElement("div",{className:"pt-3 text-center"},o.a.createElement(a.kb,{size:"sm",variant:"grow",style:{width:"4rem",height:"4rem"}})),me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(n,e);var t=ce(n);function n(){var e;oe(this,n);for(var c=arguments.length,i=new Array(c),u=0;u<c;u++)i[u]=arguments[u];return se(ue(e=t.call.apply(t,[this].concat(i))),"state",{name:"",contractor:e.props.contractor,birthday:"",card_number_id:"",license_number:"",license_scan:"",passport:"",passport_scan:"",safety_green_card:"",safety_green_card_scan:"",position_in_company:"",safety_quiz_answer:"",personal_declaration:"",special_competency:"",special_competency_scan:"",registration_number:"",filename:"",doc_type:""}),se(ue(e),"downloadFile",function(){var t=re(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({filename:n.target.value,doc_type:n.target.name},(function(){fe.downloadWorkerDocument(e.props.workerId,e.state.doc_type).then((function(t){var n=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=n;var o=e.state.filename.split("/").pop();r.setAttribute("download",o),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)})).catch((function(e){console.error("File download failed!"),console.error(e)}))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),se(ue(e),"componentDidMount",re(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getProfileFetch().then((function(){return fe.getDetailsOf("workers",e.props.workerId)})).then((function(t){return e.setState(te({},t))})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})))),se(ue(e),"render",(function(){return o.a.createElement(r.Suspense,{fallback:pe},o.a.createElement(a.S,{flush:!0},o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Birthday: "),e.state.birthday)),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Card number ID: "),e.state.card_number_id)),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"License Number: "),e.state.license_number),o.a.createElement(a.e,{variant:"outline",color:"success",id:"license_scan",name:"license_scan",value:e.state.license_scan,onClick:e.downloadFile},"Download")),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Passport: "),e.state.passport),o.a.createElement(a.e,{variant:"outline",color:"success",id:"passport_scan",name:"passport_scan",value:e.state.passport_scan,onClick:e.downloadFile},"Download")),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Safety Green Card: "),e.state.safety_green_card),o.a.createElement(a.e,{variant:"outline",color:"success",id:"safety_green_card_scan",name:"safety_green_card_scan",value:e.state.safety_green_card_scan,onClick:e.downloadFile},"Download")),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Special competencies:")),o.a.createElement(Y,{workerId:e.props.workerId})),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Registration number: "),e.state.registration_number)),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Position in Company: "),e.state.position_in_company)),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Safety quiz answer: ")),o.a.createElement(a.e,{variant:"outline",color:"success",id:"safety_quiz_answer",name:"safety_quiz_answer",value:e.state.safety_quiz_answer,onClick:e.downloadFile},"Download")),o.a.createElement(a.T,null,o.a.createElement("p",null,o.a.createElement("strong",null,"Personal declaration: ")),o.a.createElement(a.e,{variant:"outline",color:"success",id:"personal_declaration",name:"personal_declaration",value:e.state.personal_declaration,onClick:e.downloadFile},"Download"))))})),e}return n}(r.Component),ye=Object(_.b)(null,(function(e){return{getProfileFetch:function(){return e(Object(j.h)())}}}))(me),de=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mb-2 "},o.a.createElement("strong",null,e.groupLabel)),e.options.map((function(t,n){return o.a.createElement(a.C,{className:"d-flex align-items-center",key:n},o.a.createElement(a.mb,{className:"mr-2",id:t,name:t,value:t,shape:"pill",variant:"3d",color:"success",size:"sm",onChange:e.handleCheck,checked:e.parentState[t]}),o.a.createElement(a.Q,{variant:"checkbox",className:"form-check-label",htmlFor:t},t.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")))})))},be=n(24);function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=864e5,ge=function(e){return!0===e?"font-weight-bold":""},Ee=Object(_.b)(null,(function(e){return{readNotification:function(t){return e(Object(j.m)(t))}}}))(Object(be.h)((function(e){var t=function(e){var t=new Date(e),n=new Date-t;if(n<6e4)return"Now";if(n<3e5){var r=Math.round(n/6e4);return"".concat(r," minutes ago")}if(n<ve)return new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit"}).format(t);if(n<5*ve){var o=Math.round(n/ve);return o<2?"yesterday":"".concat(o," days ago")}return n<31536e6?new Intl.DateTimeFormat([],{day:"2-digit",month:"short"}).format(t):(new Intl.DateTimeFormat).format(t)}(e.notification.emitted);return console.log(e),o.a.createElement("div",{className:"message w-100",onClick:function(){return t=[e.notification,e.readNotification],n=he(t,2),r=n[0],o=n[1],void(r.unread&&o(r.id));var t,n,r,o}},o.a.createElement("div",{className:"d-flex justify-content-end"},o.a.createElement("small",{className:"text-muted mt-1 ".concat(ge(e.notification.unread))},t)),o.a.createElement("div",{className:"text-truncate font-weight-bold"}),o.a.createElement("div",{className:"text-muted text-truncate ".concat(ge(e.notification.unread))},e.notification.text))})))},687:function(e,t){},773:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(24),c=n(95),i=n(166),u=n(165),l=(n(687),n(60)),s=o.a.lazy((function(){return Promise.all([n.e(3),n.e(31)]).then(n.bind(null,742))})),f=o.a.lazy((function(){return n.e(6).then(n.bind(null,743))})),p=o.a.lazy((function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,744))})),m=o.a.lazy((function(){return Promise.all([n.e(3),n.e(24)]).then(n.bind(null,745))})),y=o.a.lazy((function(){return n.e(7).then(n.bind(null,746))})),d=o.a.lazy((function(){return Promise.all([n.e(3),n.e(30)]).then(n.bind(null,747))})),b=o.a.lazy((function(){return Promise.all([n.e(0),n.e(28)]).then(n.bind(null,748))})),h=o.a.lazy((function(){return n.e(13).then(n.bind(null,749))})),w=o.a.lazy((function(){return Promise.all([n.e(0),n.e(29)]).then(n.bind(null,750))})),v=o.a.lazy((function(){return Promise.all([n.e(3),n.e(39)]).then(n.bind(null,751))})),g=o.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(19)]).then(n.bind(null,752))})),E=o.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,753))})),O=o.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,754))})),_=o.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(8)]).then(n.bind(null,755))})),j=o.a.lazy((function(){return n.e(11).then(n.bind(null,756))})),P=o.a.lazy((function(){return Promise.all([n.e(0),n.e(16)]).then(n.bind(null,757))})),S=o.a.lazy((function(){return Promise.all([n.e(0),n.e(22)]).then(n.bind(null,758))})),x=o.a.lazy((function(){return n.e(12).then(n.bind(null,759))})),k=o.a.lazy((function(){return Promise.all([n.e(0),n.e(23)]).then(n.bind(null,760))})),D=o.a.lazy((function(){return n.e(38).then(n.bind(null,761))})),N=o.a.lazy((function(){return Promise.all([n.e(3),n.e(27)]).then(n.bind(null,762))})),R=o.a.lazy((function(){return Promise.all([n.e(0),n.e(25)]).then(n.bind(null,763))})),C=o.a.lazy((function(){return Promise.all([n.e(0),n.e(26)]).then(n.bind(null,764))})),z=o.a.lazy((function(){return n.e(34).then(n.bind(null,765))})),T=o.a.lazy((function(){return Promise.all([n.e(0),n.e(33)]).then(n.bind(null,766))})),F=o.a.lazy((function(){return Promise.all([n.e(0),n.e(37)]).then(n.bind(null,767))})),I=o.a.lazy((function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,768))})),U=[{path:"/",exact:!0,name:"Fox"},{path:"/projects",name:"Projects",component:s,exact:!0},{path:"/projects/new",name:"New",component:O,exact:!0},{path:"/projects/:id/ptw",name:"PTW",component:j,exact:!0},{path:"/projects/:id/documents",name:"Documents",component:N,exact:!0},{path:"/projects/:id/documents/new",name:"New",component:R,exact:!1},{path:"/projects/:id/documents/:doc_id",name:"Document Details",component:C,exact:!1},{path:"/safety/presets",name:"Safety Presets",component:T,exact:!0},{path:"/safety/video",name:"Safety Video",component:z,exact:!0},{path:"/projects/:id/assign_workers",name:"Assign Workers",component:F,exact:!0},{path:"/projects/:id/submit_proposal",name:"Submit Proposal",component:o.a.lazy((function(){return n.e(32).then(n.bind(null,769))})),exact:!0},{path:"/projects/:id/related_documents",name:"Related Documents",component:P,exact:!0},{path:"/projects/:id",name:"Project Details",component:_,exact:!1},{path:"/approvals",name:"Approvals",component:f,exact:!0},{path:"/documents",name:"Documents",component:I,exact:!0},{path:"/approvals/:id",name:"Approval Details",component:p,exact:!0},{path:"/current-works",name:"Current Works",component:y,exact:!0},{path:"/contractors",name:"Contractors",component:m,exact:!0},{path:"/contractors/new",name:"New",component:S,exact:!0},{path:"/contractors/:id",name:"Contractor Details",component:x,exact:!0},{path:"/contractors/:id/edit",name:"Contractor Edition",component:k,exact:!0},{path:"/contractors/:id/workers_review",name:"Workers Review",component:D,exact:!0},{path:"/managers",name:"Managers",component:d,exact:!0},{path:"/managers/new",name:"New",component:b,exact:!0},{path:"/managers/:id",name:"Manager Details",component:h,exact:!0},{path:"/managers/:id/edit",name:"Manager Edition",component:w,exact:!0},{path:"/workers",name:"Workers",component:v,exact:!0},{path:"/workers/new",name:"New",component:g,exact:!0},{path:"/workers/:id",name:"Worker Details",component:E,exact:!0},{path:"/workers/:id/competencies",name:"Spec. Competencies",component:o.a.lazy((function(){return Promise.all([n.e(3),n.e(36)]).then(n.bind(null,770))})),exact:!0},{path:"/workers/:id/competencies/new",name:"New Competency",component:o.a.lazy((function(){return Promise.all([n.e(0),n.e(35)]).then(n.bind(null,771))})),exact:!0},{path:"/workers/:id/competencies/:competency_id",name:"Competency Details",component:o.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(17)]).then(n.bind(null,772))})),exact:!0}],A=n(647),L=Object(c.b)((function(e){return{navigation:e.headerNav,company:e.company}}))((function(e){var t=Object(c.c)(),n=Object(c.d)((function(e){return e.sidebarShow}));return o.a.createElement(u.D,{withSubheader:!0},o.a.createElement(u.ob,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var e=!![!1,"responsive"].includes(n)||"responsive";t({type:"set",sidebarShow:e})}}),o.a.createElement(u.ob,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var e=![!0,"responsive"].includes(n)&&"responsive";t({type:"set",sidebarShow:e})}}),o.a.createElement(u.E,{className:"mx-auto d-lg-none",to:"/"}),o.a.createElement(u.F,{className:"mr-auto"},o.a.createElement(u.t,{items:e.navigation,components:{CHeaderNavItem:u.G,CHeaderNavLink:u.H,FoxHeaderNavLink:A.b}})),o.a.createElement(u.F,{className:"px-3"},o.a.createElement(ie,null),o.a.createElement($,null)),o.a.createElement(u.lb,{className:"px-3 justify-content-between"},o.a.createElement(u.d,{className:"border-0 c-subheader-nav m-0 px-0 px-md-3",routes:U})))}));function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(c,e);var t,n,r,a=B(c);function c(){var e;W(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return V(J(e=a.call.apply(a,[this].concat(n))),"handleClick",(function(t){t.preventDefault(),e.props.logoutUser()})),e}return t=c,(n=[{key:"render",value:function(){return o.a.createElement(u.v,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down"},o.a.createElement(u.y,{className:"c-header-nav-link",caret:!1},o.a.createElement(l.a,{name:"cil-user"})),o.a.createElement(u.x,{className:"pt-0",placement:"bottom-end"},o.a.createElement(u.w,{header:!0,tag:"div",color:"light",className:"text-center"},o.a.createElement("strong",null,"Settings")),o.a.createElement(u.w,null,o.a.createElement(l.a,{name:"cil-settings",className:"mfe-2"}),"Settings"),o.a.createElement(u.w,{divider:!0}),o.a.createElement(u.w,{onClick:this.handleClick},o.a.createElement(l.a,{name:"cil-account-logout",className:"mfe-2"}),"Logout")))}}])&&H(t.prototype,n),r&&H(t,r),c}(r.Component),$=Object(c.b)((function(e){return{currentUser:e.currentUser}}),(function(e){return{logoutUser:function(){return e(Object(i.l)())}}}))(X),K=function(e){var t=e.items.filter((function(e){return e.unread})).length;return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{name:"cil-bell"}),t>0?o.a.createElement(u.a,{shape:"pill",color:"info"},t):null)};function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(n,e);var t=te(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return ae(re(e=t.call.apply(t,[this].concat(a))),"state",{timer:""}),ae(re(e),"componentDidMount",(function(){e.props.getNotifications();var t=setInterval(e.props.getNotifications,6e4);e.setState({timer:t})})),ae(re(e),"componentWillUnmount",(function(){clearInterval(e.state.timer)})),ae(re(e),"render",(function(){return o.a.createElement(u.v,{inNav:!0,className:"c-header-nav-item mx-2",direction:"down"},o.a.createElement(u.y,{className:"c-header-nav-link",caret:!1},o.a.createElement(K,{items:e.props.notifications})),o.a.createElement(u.x,{className:"pt-0",placement:"bottom-end"},e.props.notifications.map((function(e){return o.a.createElement(u.w,{key:e.id,href:e.forward_link},o.a.createElement(A.d,{notification:e}))}))))})),e}return n}(r.Component),ie=Object(c.b)((function(e){return{notifications:e.notifications}}),(function(e){return{getNotifications:function(){return e(Object(i.g)())}}}))(ce),ue=Object(c.b)((function(e){return{navigation:e.sidebar,company:e.currentUser.company_name,projectId:e.projectId}}))(o.a.memo(Object(a.h)((function(e){var t=Object(c.c)(),n=Object(c.d)((function(e){return e.sidebarShow}));return o.a.createElement(u.cb,{show:n,onShowChange:function(e){return t({type:"set",sidebarShow:e})}},o.a.createElement(u.db,{className:"d-md-down-none",to:"/"},o.a.createElement("h2",null,e.company?e.company:"FOX")),o.a.createElement(u.fb,null,e.projectId?o.a.createElement(u.t,{items:e.navigation,components:{CSidebarNavDivider:u.gb,CSidebarNavDropdown:u.hb,CSidebarNavItem:u.ib,CSidebarNavTitle:u.jb}}):null),o.a.createElement(u.eb,{className:"c-d-md-down-none"}))})))),le=o.a.createElement("div",{className:"pt-3 text-center"},o.a.createElement(u.kb,{size:"sm",variant:"grow",style:{width:"4rem",height:"4rem"}})),se=o.a.lazy((function(){return n.e(4).then(n.bind(null,741))})),fe=function(e){return o.a.createElement("main",{className:"c-main"},o.a.createElement(u.s,{fluid:!0},o.a.createElement(r.Suspense,{fallback:le},o.a.createElement(a.d,null,U.map((function(e,t){return e.component&&o.a.createElement(a.b,{key:t,path:e.path,exact:e.exact,name:e.name,render:function(t){return o.a.createElement(u.A,null,o.a.createElement(e.component,t))}})})),o.a.createElement(a.a,{from:"/",to:"/projects"}),o.a.createElement(o.a.Fragment,null,o.a.createElement(se,null))))))},pe=Object(c.b)((function(e){return{role:e.currentUser.role}}),null)(o.a.memo(fe));function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){ye(a,r,o,c,i,"next",e)}function i(e){ye(a,r,o,c,i,"throw",e)}c(void 0)}))}}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(i,e);var t,n,r,c=ve(i);function i(){var e;be(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(Ee(e=c.call.apply(c,[this].concat(n))),"componentDidMount",de(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getProfileFetch().then((function(){return e.props.getDashboardLayout(e.props.currentUser.role,e.props.match.params.id)}));case 2:case"end":return t.stop()}}),t)})))),_e(Ee(e),"componentDidUpdate",(function(t){var n=Object(a.f)(e.props.location.pathname,{path:"/projects/:id",exact:!0});n&&t.location.pathname!=e.props.location.pathname&&e.props.getDashboardLayout(e.props.currentUser.role,n.params.id)})),e}return t=i,(n=[{key:"render",value:function(){return this.props.currentUser.username?o.a.createElement("div",{className:"c-app c-default-layout"},o.a.createElement(ue,null),o.a.createElement("div",{className:"c-wrapper"},o.a.createElement(L,null),o.a.createElement("div",{className:"c-body"},o.a.createElement(pe,null)))):o.a.createElement(a.a,{to:"/login"})}}])&&he(t.prototype,n),r&&he(t,r),i}(r.Component);t.default=Object(c.b)((function(e){return{currentUser:e.currentUser,navigation:e.sidebar}}),(function(e){return{getProfileFetch:function(){return e(Object(i.h)())},getDashboardLayout:function(t,n){return e(Object(i.e)(t,n))}}}))(je)}}]);
//# sourceMappingURL=9.main.js.map