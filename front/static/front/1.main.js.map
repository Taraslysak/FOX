{"version":3,"file":"1.main.js","sources":["webpack:///./src/components/tables/FoxEntityListTable.js","webpack:///./src/components/tables/WorkStatusDropdown.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardTitle,\n  CCol,\n  CDataTable,\n  CRow,\n  CLink,\n} from '@coreui/react'\nimport WorkStatusDropdown from './WorkStatusDropdown'\n\nclass FoxEntityListTable extends Component {\n\n  state = {\n    error: \"\",\n    modal: false\n  }\n\n  setModalVisibility = () => {\n    this.setState({\n      modal: !this.state.modal\n    })\n  }\n\n  alertOnClick = (id, e) => {\n    this.props.history.push(`${this.props.match.url}/${id}`)\n  }\n\n  render = () => {\n    const linkName = this.props.fields ? this.props.fields[0] : \"username\"\n    return (\n      <CRow>\n        <CCol>\n          <CCard>\n            <CCardHeader\n              className=\"d-flex justify-content-between\">\n              <CCardTitle>\n                {this.props.tableName}\n              </CCardTitle>\n              {this.props.tableName === \"Projects\" && this.props.role === \"Contr\"\n                ?\n                null\n                :\n                <CLink\n                  className=\"btn btn-pill btn-outline-success\"\n                  to={`${this.props.match.url}/new`}\n                >\n                  Add new\n                </CLink>\n              }\n            </CCardHeader>\n            <CCardBody>\n              <CDataTable\n                items={this.props.tableData ? this.props.tableData : []}\n                fields={this.props.fields ? this.props.fields : []}\n                clickableRows\n                hover\n                striped\n                bordered\n                sorter\n                tableFilter\n                columnFilter\n                size=\"sm\"\n                itemsPerPage={10}\n                itemsPerPageSelect\n                pagination\n                scopedSlots={{\n                  [linkName]:\n                    (item) => (\n                      <td>\n                        <CLink\n                          to={`${this.props.match.url}/${item.id}`}\n                        >\n                          {item[linkName]}\n                        </CLink>\n                      </td>\n                    ),\n                  'application_status':\n                    (item) => (\n                      <td>\n                        <CBadge shape=\"pill\" color={this.props.getBadge(item.application_status)}>\n                          {item.application_status}\n                        </CBadge>\n                      </td>\n                    ),\n                  'work_status':\n                    (item) => (\n                      <td className=\"d-flex align-items-center\">\n                        <CBadge shape=\"pill\" color={this.props.getBadge(item.work_status)}>\n                          {item.work_status}\n                        </CBadge>\n                        <WorkStatusDropdown key={item.id} item={item} {...this.props} />\n                      </td>\n                    )\n                }}\n              />\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow >\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  role: state.currentUser.role\n})\n\nexport default connect(mapStateToProps, null)(FoxEntityListTable)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { FoxApiService } from '../../services'\nimport { getProjectList } from '../../actions'\nimport { CDropdown, CDropdownToggle, CDropdownItem, CDropdownMenu } from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\n\n\nconst foxApi = new FoxApiService();\n\nconst choices = [\n  { Works_started: 'Works started' },\n  { Works_finished: 'Works finished' },\n  { Extended: 'Extended' },\n  { Closed: 'Closed' },\n]\n\n\nconst handleClick = async ({ value, props }, event) => {\n  await foxApi.patchEntityOf(\"projects\", props.item.id, { status: value })\n    .then(() => {\n      props.getProjectList();\n    })\n}\n\nconst WorkStatusDropdown = props => {\n  return (\n    props.role === \"CliAdm\" && props.item.work_status !== \"Application processing\" ?\n      <CDropdown >\n        <CDropdownToggle className=\"project-table-toggle\">\n          <CIcon\n            style={{ margin: \"0\" }}\n            className=\"table-dropdown-icon\"\n            name={'cilSettings'} />\n        </CDropdownToggle>\n        <CDropdownMenu className=\"p-0 foxtable-dropdown-menu\" placement=\"bottom-end\">\n          {choices.map((choice, idx) => {\n            const [value, name] = Object.entries(choice)[0]\n            return <CDropdownItem\n              key={idx}\n              value={value}\n              onClick={event => handleClick({ value, props }, event)}\n            >{name}</CDropdownItem>\n          })}\n\n        </CDropdownMenu>\n      </CDropdown > : null\n\n\n  )\n}\n\nconst mapStateToProps = state => ({\n  role: state.currentUser.role\n})\n\nconst mapDispatchToProps = dispatch => ({\n  getProjectList: () => dispatch(getProjectList()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WorkStatusDropdown)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAWA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAKA;AADA;AAUA;AACA;AAFA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AADA;AAFA;AAUA;AAEA;AAAA;AAAA;AAFA;AAQA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AALA;AAlCA;AAiDA;AACA;;;;;AA3FA;AACA;AA4FA;AAAA;AACA;AADA;AAAA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AAGA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AAHA;AAKA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAKA;AAOA;AACA;AACA;AAAA;AACA;AADA;AAAA;AACA;AAGA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AACA;AAGA;;;;A","sourceRoot":""}